{% extends 'base.html' %}

{% block title %}Calendar{% endblock %}

{% block other_css_libs %}
  <!-- FullCalendar CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.css">
{% endblock %}

{% block extra_head %}
  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.js"></script>

  <!-- FullCalendar JS Locales -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/locales-all.min.js"></script>

  <!-- FullCalendar Init -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        height: '100%',
        expandRows: true,
        // themeSystem: 'bootstrap',
        headerToolbar: {
          left: 'prevYear,prev,next,nextYear dayGridMonth today',
          right: 'title',
        },
        locale: navigator.language.substring(0, 2), // it is automatically set
        navLinks: true, // can click day/week names to navigate views
        selectable: true,
        // selectMirror: true,
        // select: function(arg) {
        //   var title = prompt('Event Title:');
        //   if (title) {
        //     calendar.addEvent({
        //       title: title,
        //       start: arg.start,
        //       end: arg.end,
        //       allDay: arg.allDay
        //     })
        //   }
        //   calendar.unselect()
        // },
        dateClick: function(arg) {
          console.log(arg.date);
          console.log(arg.dateStr);
          console.log(arg.allDay);
          console.log(arg.dayEl);
          console.log(arg.calendar);
          console.log(arg.jsEvent);
          console.log(arg.view);
        },
        eventClick: function(arg) {
          if (confirm('Are you sure you want to delete this event?')) {
            arg.event.remove()
          }
        },
        editable: true,
        dayMaxEvents: true, // allow "more" link when too many events
      });

      calendar.render();
    });
  </script>
{% endblock %}

{% block content %}
  <div id='calendar-container'>
    <div id='calendar'></div>
  </div>
{% endblock %}